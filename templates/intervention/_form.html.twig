{{ form_start(form) }}

<div class="row mb-3">
    <div class="col-md-6">
        {{ form_label(form.dateint) }}
        {{ form_widget(form.dateint, {'attr': {'class': 'form-control'}}) }}
    </div>
    <div class="col-md-6">
        {{ form_label(form.typeint) }}
        {{ form_widget(form.typeint) }}
    </div>
</div>

<div class="row mb-3">
    <div class="col-md-6">
        {{ form_label(form.technicien) }}
        {{ form_widget(form.technicien, {'attr': {'class': 'form-control'}}) }}
    </div>
    <div class="col-md-6">
        {{ form_label(form.etatapres) }}
        {{ form_widget(form.etatapres, {'attr': {'class': 'form-control'}}) }}
    </div>
</div>

<div class="row mb-3" id="prochaine-date-row">
    <div class="col-md-6">
        {{ form_label(form.prochainedate) }}
        {{ form_widget(form.prochainedate, {'attr': {'class': 'form-control'}}) }}
    </div>
</div>

<div class="text-end mt-4">
    <button class="btn btn-success">✅ Enregistrer l'intervention</button>
</div>

{{ form_end(form) }}

<script>
document.addEventListener('DOMContentLoaded', function() {
    const typeSelect = document.getElementById('typeint-select');
    const prochaineDateField = document.getElementById('prochaine-date-field');

    function toggleProchaineDate() {
        console.log('Type sélectionné:', typeSelect.value); // Debug
        if (typeSelect.value === 'curatif') {
            prochaineDateField.disabled = true;
            prochaineDateField.value = '';
            console.log('Champ prochaine date désactivé'); // Debug
        } else {
            prochaineDateField.disabled = false;
            console.log('Champ prochaine date activé'); // Debug
        }
    }

    if (typeSelect && prochaineDateField) {
        typeSelect.addEventListener('change', toggleProchaineDate);
        toggleProchaineDate(); // Initial check
        console.log('Script initialisé'); // Debug
    } else {
        console.log('Éléments non trouvés:', {typeSelect: !!typeSelect, prochaineDateField: !!prochaineDateField}); // Debug
    }
});
</script>
