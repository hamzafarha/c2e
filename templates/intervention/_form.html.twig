{{ form_start(form) }}

<div class="row mb-3">
    <div class="col-md-6">
        {{ form_label(form.dateint) }}
        {{ form_widget(form.dateint, {'attr': {'class': 'form-control'}}) }}
    </div>
    <div class="col-md-6">
        {{ form_label(form.typeint) }}
        {{ form_widget(form.typeint, {'attr': {
            'class': 'form-control',
            'id': 'intervention_type'
        }}) }}
    </div>
</div>

<div class="row mb-3">
    <div class="col-md-6">
        {{ form_label(form.technicien) }}
        {{ form_widget(form.technicien, {'attr': {'class': 'form-control'}}) }}
    </div>
    <div class="col-md-6">
        {{ form_label(form.etatapres) }}
        {{ form_widget(form.etatapres, {'attr': {'class': 'form-control'}}) }}
    </div>
</div>

<div class="row mb-3">
    <div class="col-md-6">
        {{ form_label(form.prochainedate) }}
        {{ form_widget(form.prochainedate, {'attr': {
            'class': 'form-control',
            'id': 'intervention_prochaine_date'
        }}) }}
    </div>
</div>

<div class="text-end mt-4">
    <button class="btn btn-success">✅ Enregistrer l'intervention</button>
</div>

{{ form_end(form) }}

<script>
document.addEventListener('DOMContentLoaded', function() {
    const typeSelect = document.getElementById('intervention_type');
    const prochaineDateField = document.getElementById('intervention_prochaine_date');
    
    function toggleProchaineDate() {
        if (typeSelect.value === 'curatif') {
            prochaineDateField.disabled = true;
            prochaineDateField.value = '';
            prochaineDateField.closest('.row').style.display = 'none';
        } else {
            prochaineDateField.disabled = false;
            prochaineDateField.closest('.row').style.display = 'flex';
        }
    }
    
    // Initialisation
    toggleProchaineDate();
    
    // Écouteur d'événement
    typeSelect.addEventListener('change', toggleProchaineDate);
});
</script>